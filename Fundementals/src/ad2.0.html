<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AD</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <style>
        * {
            text-decoration: none !important;
            color: black;
            overflow: hidden;
            height: 100vh;
            width: 100vw; 
        }
    </style> <!--Need to fix so text can be shown!+-->
</head>
<body>
    <a href="#" id="link" target="_blank">
        <div class="card mb-3" id="card">
            <img src="./ApprovedDave.jpg" class="card-img-top" id="img">
            <div class="card-body">
                <h5 class="card-title" id="title">Loading...</h5>
                <p class="card-text" id="desc" >Loading...</p>
                <p class="card-text"><small class="text-body-secondary" id="footer">AD</small></p>
            </div>
        </div>
    </a>
    
</body>
<script>
    images = {
        "ageofwar2": "ageofwar2.png",
        "burgertycoon": "fastfoodtycoon.png",
        "papaspizzera": "papaspizzeria.png",
        "jacksmith": "jacksmith.png",
        "themehotel": "themehotel.png",
        "whenpizzasattack": "papalouiewhenpizzasattack.png",
        "miraginewar": "miraginewar.jpg",
        "eaglercraft": "eaglercraft.png",
        "fivenightsatwinstons": "fnaw.png",
        "slope": "slope.png",
        "crossyroad": "crossyroad.png"
    }

    ads = {
        "daveAD": {
            "image": "./ApprovedDave.jpg",
            "link": "https://btc.jgkd.dev/Fundementals/games.html?from=dave"
        },
        "mitchellAD": {
            "image": "./games/img/comingsoon.jpg",
            "link": "https://btc.jgkd.dev/Fundementals/games.html?from=mitchell"
        },
        "gzoneAD": {
            "image": './gzone.png',
            "link": 'https://btc.jgkd.dev/gzone'
        },
        "blackhistorymonthAD": {
            "image": "./blm.png",
            "link": "https://btc.jgkd.dev/Fundementals/games.html?from=blm",
            "customText": "COME AND PLAY SOME GAMES WHILE YOU CELEBRATE BLACK HISTORY MONTH!"
        },
        "animaltestingAD": {
            "image": "./animaltesting.png",
            "link": "https://btc.jgkd.dev/Fundementals/games.html?from=animaltesting",
            "customText": "STOP ANIMAL TESTING! PLAY OUR GAMES!"
        },
        "suddanAD1": {
            "image": "./SuddanAd1.png",
            "link": "https://btc.jgkd.dev/Fundementals/games.html?from=suddan",
            "customText": "Can you find him?"
        },
        "suddanAD2": {
            "image": "./SuddanAd2.png",
            "link": "https://btc.jgkd.dev/Fundementals/games.html?from=suddan",
            "customText": "Can you find him?"
        }
    }

    const colours = ['red', 'orange', 'yellow', 'green', 'blue', 'violet']
    let currentIndex = 0;

    function changingColours() {
        document.body.style.background = colours[currentIndex];
        currentIndex = (currentIndex + 1) % colours.length; 
    }

    function getCookie(cname) {
        let name = cname + "=";
        let decodedCookie = decodeURIComponent(document.cookie);
        let ca = decodedCookie.split(';');
        for (let i = 0; i < ca.length; i++) {
            let c = ca[i]
            while (c.charAt(0) == ' ') {
                c = c.substring(1);
            }
            if (c.indexOf(name) == 0) {
                return c.substring(name.length, c.length);
            }
        }
        return "";
    }

    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const type = urlParams.get("type");
    const width = urlParams.get("width");
    const height = urlParams.get("height");
    const specAd = urlParams.get("ad");

    const link = document.getElementById("link");
    const card = document.getElementById("card");
    const image = document.getElementById("img");
    const title = document.getElementById("title");
    const desc = document.getElementById("desc");
    const footer = document.getElementById("footer");

    if (width != null && height != null) {
        document.body.style.width = width;
        document.body.style.height = height;
    }


    if (type=="suggested") {
        if (getCookie("username") != "" && name != null) {
            let gameURL = getCookie("lastGame1");
            let searchParams = new URLSearchParams(gameURL)

            let name = searchParams.get('name');

            imageLocation = 'games/img/' + images[name.toLocaleLowerCase()]
            image.setAttribute("src", imageLocation)
            title.innerHTML = "Contiune Where You Left Off!"
            desc.innerHTML = ""
            footer.innerHTML = "Suggested"
            link.setAttribute("href", gameURL)
        } else{
            title.innerHTML = "Click here to play our amazing games!"
            desc.innerHTML = "Get Free Access Today!"
            footer.innerHTML = "Suggested"
            link.setAttribute("href", "http://btc.jgkd.dev/Fundementals/games.html?from=newUser&origin=" + window.top.location.href)
        }
    } else {
        const keys = Object.keys(ads);
        const randomIndex = Math.floor(Math.random() * keys.length)

        if (specAd == null) {
            let currentIndex = keys[randomIndex]

            let currentLink = ads[currentIndex]["link"] + '&origin=' + window.top.location.href;

            if (ads[currentIndex]["customText"] != null) {
                desc.innerHTML = ads[currentIndex]["customText"]
            }

            title.innerHTML = "Play Fun Games!"
            image.setAttribute("src", ads[currentIndex]["image"])
            link.setAttribute("href", ads[currentIndex]["link"])
        }
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

</html>